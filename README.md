# ü§ñ Verbs Play Bot

–ë–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Telegram –∏ VK, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç DialogFlow –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–π —Ñ–æ—Ä–º–µ.

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

 –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ uv (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
```bash
git clone https://github.com/jendox/dvmn_verbs_play_bot.git
cd dvmn_verbs_play_bot
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```bash
uv sync
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Telegram

–ù–∞–ø–∏—à–∏—Ç–µ –≤ Telegram [@BotFather](https://telegram.me/BotFather).

–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ –∫–æ–º–∞–Ω–¥–æ–π /newbot.

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω.

–ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π chat_id, –Ω–∞–ø–∏—à–∏—Ç–µ –≤ Telegram —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–º—É –±–æ—Ç—É: [@userinfobot](https://telegram.me/userinfobot).

### –í–ö–æ–Ω—Ç–∞–∫—Ç–µ

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ ‚Üí –∫–Ω–æ–ø–∫–∞ ¬´–°–æ–∑–¥–∞—Ç—å —Å–æ–æ–±—â–µ—Å—Ç–≤–æ¬ª.

–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø ¬´–ü—É–±–ª–∏—á–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞¬ª –∏–ª–∏ ¬´–ì—Ä—É–ø–ø–∞¬ª ‚Äî –Ω–µ–≤–∞–∂–Ω–æ, –≥–ª–∞–≤–Ω–æ–µ, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –≤–∫–ª—é—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è.

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≥—Ä—É–ø–ø—ã:

- –û—Ç–∫—Ä–æ–π –°–æ–æ–±—â–µ–Ω–∏—è ‚Üí –í–∫–ª—é—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞.
- –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –†–∞–±–æ—Ç–∞ —Å API ‚Üí –°–æ–∑–¥–∞—Ç—å –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞.

–î–∞–π—Ç–µ –ø—Ä–∞–≤–∞:

- messages ‚Äî –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏.
- groups ‚Äî –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è Long Poll —Å–µ—Ä–≤–µ—Ä–∞.

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞ (access_token) ‚Äî –æ–Ω –Ω—É–∂–µ–Ω –¥–ª—è `.env`.

–ü–æ–ª—É—á–∏—Ç–µ ID –≥—Ä—É–ø–ø—ã: –æ—Ç–∫—Ä–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ–æ–±—â–µ—Å—Ç–≤–∞ –∏ —Å–∫–æ–ø–∏—Ä—É–π —á–∏—Å–ª–æ –∏–∑ URL
(–Ω–∞–ø—Ä–∏–º–µ—Ä, vk.com/public123456789 ‚Üí ID = 123456789).

–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è [–∑–¥–µ—Å—å](https://dev.vk.com/ru/api/community).

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google DialogFlow

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [DialogFlow Console](https://dialogflow.cloud.google.com/).

–ù–∞–∂–º–∏ Create agent –∏ –≤—ã–±–µ—Ä–∏—Ç–µ:

- Google Cloud project (–∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π)
- –Ø–∑—ã–∫: Russian

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∞–≥–µ–Ω—Ç–∞ –ø–µ—Ä–µ–π–¥–∏ –≤ [Google Cloud Console ‚Üí Credentials](https://console.cloud.google.com/apis/credentials).

–°–æ–∑–¥–∞–π—Ç–µ Service account key:

- –¢–∏–ø: JSON
- –ù–∞–∑–æ–≤–∏—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, dialogflow-bot

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å–∫–∞—á–∞–Ω–Ω—ã–π .json ‚Äî —ç—Ç–æ –≤–∞—à–∏ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (credentials).

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:

[DialogFlow quickstart](https://cloud.google.com/dialogflow/docs/quickstart).

[–°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–µ–π —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞](https://cloud.google.com/docs/authentication/getting-started).


### –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```bash
touch .env
```

–î–æ–±–∞–≤—å—Ç–µ –≤ –Ω–µ–≥–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```env
TELEGRAM_TOKEN=your-telegram-bot-token
TELEGRAM_CHAT_ID=your-telegram-chat-id
VK_TOKEN=your-vk-api-token
DIALOGFLOW_PROJECT_ID=your-project-id
GOOGLE_APPLICATION_CREDENTIALS=path/to/your/credentials.json
```

## üöÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –ó–∞–ø—É—Å–∫

–û—Ç–¥–µ–ª—å–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞ VK –∏ –±–æ—Ç–∞ Telegram:

```bash
uv run python3 vk_bot.py
uv run python3 tg_bot.py
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞

–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –Ω–∞–∂–º–∏—Ç–µ `Ctrl+C` –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.

## üß† –û–±—É—á–µ–Ω–∏–µ Dialogflow –∏–Ω—Ç–µ–Ω—Ç–∞–º–∏

–§–∞–π–ª —Å –æ–±—É—á–∞—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ ‚Äî JSON —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∏–¥–∞:
```json
{
  "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ": {
    "questions": [
      "–ü—Ä–∏–≤–µ—Ç",
      "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ"
    ],
    "answer": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?"
  },
  "–ü–æ–∫–∞": {
    "questions": [
      "–ü–æ–∫–∞",
      "–î–æ –≤—Å—Ç—Ä–µ—á–∏"
    ],
    "answer": "–î–æ —Å–∫–æ—Ä–æ–≥–æ!"
  }
}
```

–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ç–µ–Ω—Ç–æ–≤:
```bash
uv run python3 learn_dialogflow.py # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —á–∏—Ç–∞–µ—Ç questions.json
uv run python3 learn_dialogflow.py -f data/qa.json
```

## üìù –õ–æ–≥–∏ –≤ Telegram

–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∏ –æ—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ —á–∞—Ç TELEGRAM_CHAT_ID.

–§–æ—Ä–º–∞—Ç ‚Äî HTML; —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–º –±–ª–æ–∫–æ–º.

## üìö –ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –±–æ—Ç–æ–≤

| Telegram | VK               |
|-----------|------------------|
| ![Telegram](docs/demo_telegram.gif) | ![VK](docs/demo_vk.gif) |
